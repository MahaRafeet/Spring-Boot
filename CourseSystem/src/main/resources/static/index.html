<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Course System</title>

    <style>
        :root {
            --baby-yellow: #fff7c8;
            --baby-yellow-soft: #fff3b0;
            --baby-blue: #b7eaff;
            --baby-blue-dark: #76d1ff;
            --text-main: #2c3e50;
        }

        body {
            margin: 0;
            padding: 40px 0;
            background: linear-gradient(160deg, var(--baby-yellow), var(--baby-yellow-soft));
            font-family: "Poppins", sans-serif;
            display: flex;
            justify-content: center;
        }

        .page {
            width: 100%;
            max-width: 850px;
        }

        h1 {
            text-align: center;
            font-size: 36px;
            font-weight: 700;
            color: var(--text-main);
        }

        .card {
            background: rgba(255,255,255,0.92);
            backdrop-filter: blur(12px);
            padding: 25px;
            border-radius: 20px;
            margin-top: 30px;
            border: 1px solid rgba(183,234,255,0.7);
            box-shadow: 0 8px 20px rgba(0,0,0,0.07);
        }

        button {
            background: linear-gradient(135deg, var(--baby-blue), var(--baby-blue-dark));
            color: white;
            padding: 12px 20px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            box-shadow: 0 5px 12px rgba(118,209,255,0.5);
            margin-bottom: 10px;
        }

        button:hover {
            transform: translateY(-3px);
        }

        input {
            width: 95%;
            padding: 12px;
            border-radius: 12px;
            border: 2px solid var(--baby-blue);
            margin-bottom: 18px;
            font-size: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        th {
            background: var(--baby-blue-dark);
            padding: 12px;
            color: white;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #eee;
        }

        tr:hover {
            background: #f2fbff;
        }

        .hidden {
            display: none;
        }
    </style>

</head>

<body>

<div class="page">

    <h1>üìò Course System</h1>

    <!-- MENU PAGE -->
    <div id="menuPage" class="card">
        <h2>Select an Operation</h2>

        <button onclick="showPage('createPage')">‚ûï Create Course</button><br>
        <button onclick="loadAll()">üìö View All Courses</button><br>
        <button onclick="showPage('searchPage')">üîç Search by ID</button><br>
        <button onclick="showPage('updatePage')">‚úèÔ∏è Update Course</button><br>
        <button onclick="showPage('deletePage')">üóëÔ∏è Delete Course</button>
    </div>

    <!-- CREATE PAGE -->
    <div id="createPage" class="card hidden">
        <h2>‚ûï Create Course</h2>

        <input id="cName" placeholder="Course Name">
        <input id="cInstructor" placeholder="Instructor">
        <input id="cHours" placeholder="Hours">

        <button onclick="createCourse()">Create</button>
        <button onclick="showMenu()">‚¨Ö Back</button>
    </div>

    <!-- VIEW ALL PAGE -->
    <div id="allPage" class="card hidden">
        <h2>üìö All Courses</h2>

        <table>
            <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Instructor</th>
                <th>Hours</th>
            </tr>
            </thead>
            <tbody id="courseTable"></tbody>
        </table>

        <button onclick="showMenu()">‚¨Ö Back</button>
    </div>

    <!-- SEARCH PAGE -->
    <div id="searchPage" class="card hidden">
        <h2>üîç Search Course</h2>

        <input id="searchId" placeholder="Course ID">
        <button onclick="searchCourse()">Search</button>
        <button onclick="showMenu()">‚¨Ö Back</button>

        <div id="searchResult"></div>
    </div>

    <!-- UPDATE PAGE -->
    <div id="updatePage" class="card hidden">
        <h2>‚úèÔ∏è Update Course</h2>

        <input id="uId" placeholder="Course ID">
        <input id="uName" placeholder="New Name">
        <input id="uInstructor" placeholder="New Instructor">
        <input id="uHours" placeholder="New Hours">

        <button onclick="updateCourse()">Update</button>
        <button onclick="showMenu()">‚¨Ö Back</button>
    </div>

    <!-- DELETE PAGE -->
    <div id="deletePage" class="card hidden">
        <h2>üóëÔ∏è Delete Course</h2>

        <input id="dId" placeholder="Course ID">
        <button onclick="deleteCourse()">Delete</button>
        <button onclick="showMenu()">‚¨Ö Back</button>
    </div>

</div>

<script>

    const BASE = "http://localhost:8080/course";

    function showPage(pageId) {
        document.querySelectorAll(".card").forEach(c => c.classList.add("hidden"));
        document.getElementById(pageId).classList.remove("hidden");
    }

    function showMenu() {
        document.querySelectorAll(".card").forEach(c => c.classList.add("hidden"));
        document.getElementById("menuPage").classList.remove("hidden");
    }


    // CREATE
    async function createCourse() {
        const obj = {
            name: cName.value,
            instructor: cInstructor.value,
            hours: cHours.value
        };

        const res = await fetch(BASE + "/create", {
            method: "POST",
            body: JSON.stringify(obj),
            headers: { "Content-Type": "application/json" }
        });

        alert(await res.text());
    }

    // VIEW ALL
    async function loadAll() {
        showPage("allPage");

        const res = await fetch(BASE + "/getAll");
        const list = await res.json();

        const table = document.getElementById("courseTable");
        table.innerHTML = "";

        list.forEach(c => {
            table.innerHTML += `
               <tr>
                    <td>${c.id}</td>
                    <td>${c.name}</td>
                    <td>${c.instructor}</td>
                    <td>${c.hours}</td>
               </tr>
            `;
        });
    }

    // SEARCH
    async function searchCourse() {
        const id = searchId.value;

        const res = await fetch(BASE + "/getById?id=" + id);
        const c = await res.json();

        searchResult.innerHTML = `
            <div class="card" style="margin-top:20px;">
                <h3>${c.name ?? "Not Found"}</h3>
                <p><b>Instructor:</b> ${c.instructor}</p>
                <p><b>Hours:</b> ${c.hours}</p>
            </div>
        `;
    }

    // UPDATE
    async function updateCourse() {
        const obj = {
            id: uId.value,
            name: uName.value,
            instructor: uInstructor.value,
            hours: uHours.value
        };

        const res = await fetch(BASE + "/update", {
            method: "PUT",
            body: JSON.stringify(obj),
            headers: { "Content-Type": "application/json" }
        });

        alert(await res.text());
    }

    // DELETE
    async function deleteCourse() {
        const id = dId.value;

        const res = await fetch(BASE + "/delete/" + id, { method: "DELETE" });

        alert(await res.text());
    }

</script>

</body>
</html>
